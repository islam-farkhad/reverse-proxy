# Обратный прокси-сервер на C++

## 1. Цели проекта
#### [Описание проекта](reverse_proxy.md)
### Основные задачи:
- Реализация HTTP-прокси-сервера:
    - Принимать запросы
    - Анализировать их и перенаправлять их на соответствующий сервер.
    - Обрабатывать ответы от сервера и возвращать их клиенту.

### Управление маршрутизацией:
- Настраивать маршруты через внешний конфигурационный файл.
- Обеспечить поддержку различных путей и портов.

### Производительность:
- Обработаывать соединения со стороны клиентов и серверов в рамках одного потока - реализовать мультиплексирование 

---

## 2. Проделанная работа

### Реализовано:
- Простой HTTP-сервер:
    - Получает при запуске конфиг файл формата:
      ```
      /lol:2000
      /kek:2001
      ```
    - Обрабатывает HTTP-запросы с помощью сокетов.
    - Возвращает текстовый ответ с указанием пути и порта для запросов, заданных в конфиг файле.
    - Для неизвестных путей отвечает 404 Not Found.

- Работа с конфигурацией:
    - Сервер загружает маршруты из внешнего файла.
    - Настраивает маршруты для обработки запросов.

- Обработка клиентов:
    - Сервер принимает и обрабатывает запросы в порядке очереди.

- Корректное завершение:
  - Реализовано корректноое завершение приложения (с закрытием сокета) по сигналу
### Пример ответа сервера:
- Для существующего маршрута:
```
HTTP/1.1 200 OK
Content-Type: text/plain
Content-Length: 23
Path: /test, Port: 8080
```
- Для неизвестного пути:
```
HTTP/1.1 404 Not Found
Content-Type: text/plain
Content-Length: 9
Not Found
```
---

## 3. Инструкция к запуску текущего функционала
- Склонировать репозиторий
- Создать в корне проекта папку ```build```
- Из этой папки выполнить:
  ```bash
  cmake ..
  make
  ```
- Можно запускать:
  ```bash
  ./reverse_proxy 8080 ../config.txt
  ```
- Переходим на ```localhost:8080/<какой-нибудь путь из конфиг файла>``` и должны увидеть указанный путь и заданный для него порт
- Для завершение нажмите CTRL + C, приложение завершится и порт будет освобожден перед завершением.
---

## 4. План работ
### Текущие задачи:
1. Перенаправление запросов:
   - Перенаправлять запросы на конечный сервер. 
   - Возвращать ответы от конечного сервера клиенту.
2. Мультиплексирование:
   - Изучить и реализовать, выбрав наиболее подходящий вариант.
### Долгосрочные задачи:
1. Демо:
   - Подготовить демонстацию работы прокси сервера подняв пару простых веб серверов и клиента. 
   - Записать видео с демнострацией работы сервера
2. Документация:
   - Подготовить описание архитектуры и руководства по использованию сервера.